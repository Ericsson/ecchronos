# Time based run policy

Time based run policy is used to prevent schedules to run during specific time windows.
The configuration is read from a table `ecchronos.reject_configuration`.

When a schedule is about to run, it's validated against the time based run policy to check if it's allowed to,
if not the schedule will be run after the run policy allows it.

To see if the schedule is blocked check `schedules` using [ecctool](autogenerated/ECCTOOL.md).

## Example of configuration through cqlsh

The example below will block all schedules from running between 11:00-11:10 in nodes from dc1.

    INSERT INTO ecchronos.reject_configuration(keyspace_name,table_name,start_hour,start_minute,end_hour,end_minute, dc_exclusion) VALUES ('*','*',11,0,11,10, {'dc1'});

The example below will block schedules for keyspace `exampleks` and table `exampletable` from running between 11:00-11:10 in dc1 and dc2.
Schedules for other tables will not be affected.

    INSERT INTO ecchronos.reject_configuration(keyspace_name,table_name,start_hour,start_minute,end_hour,end_minute, dc_exclusion) VALUES ('exampleks','exampletable',11,0,11,10, {'dc1', 'dc2'});

The example below will block all schedules from running forever in all datacenters.

    INSERT INTO ecchronos.reject_configuration(keyspace_name,table_name,start_hour,start_minute,end_hour,end_minute, dc_exclusion) VALUES ('*','*',0,0,0,0, {'*'});

*If dc_exclusion is null or empty, it's considered that all datacenters should be affected by the run policy.*

Example of using ecctool to configure Time based run policy can be found in [ecctool examples](ECCTOOL_EXAMPLES.md).

